<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProFinance - 올인원 금융 계산기</title>
  <meta name="google-adsense-account" content="ca-pub-5655610048474795">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5655610048474795"
    crossorigin="anonymous"></script>
  <meta name="description" content="대출, 투자, 은퇴, 부동산, 세금 등 15가지 전문 금융 계산기로 당신의 자산을 관리하세요.">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap');

    :root {
      --primary: #2563eb;
      --primary-light: #60a5fa;
      --primary-dark: #1e40af;
      --secondary: #7c3aed;
      --accent: #f59e0b;
      --bg-body: #f8fafc;
      --card-bg: #ffffff;
      --text-main: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --sidebar-bg: #ffffff;
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12);
      --shadow-md: 0 4px 20px -2px rgba(0, 0, 0, 0.08);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      --radius-lg: 32px;
      --radius-md: 20px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    [data-theme='dark'] {
      --bg-body: #0f172a;
      --card-bg: #1e293b;
      --text-main: #f1f5f9;
      --text-muted: #94a3b8;
      --border: #334155;
      --sidebar-bg: #1e293b;
      --shadow-md: 0 4px 20px -2px rgba(0, 0, 0, 0.3);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Pretendard', system-ui, -apple-system, sans-serif;
    }

    body {
      background-color: var(--bg-body);
      color: var(--text-main);
      transition: background-color 0.3s, color 0.3s;
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 72px;
      background: rgba(var(--card-bg), 0.8);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2rem;
      z-index: 1000;
    }

    .logo {
      font-family: 'Outfit', sans-serif;
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      flex-shrink: 0;
    }

    .logo span {
      display: inline;
    }

    @media (max-width: 600px) {
      .logo span {
        display: none;
      }

      .navbar {
        padding: 0 1rem;
      }
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
      margin: 0 1rem;
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .nav-links::-webkit-scrollbar {
      display: none;
    }

    .nav-links a {
      text-decoration: none;
      color: var(--text-main);
      font-weight: 600;
      font-size: 0.9rem;
      transition: var(--transition);
    }

    .nav-links a:hover {
      color: var(--primary);
    }

    .theme-toggle {
      cursor: pointer;
      padding: 10px;
      border-radius: 12px;
      background: var(--bg-body);
      border: 1px solid var(--border);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    /* Layout */
    .app-container {
      display: flex;
      max-width: 1440px;
      margin: 72px auto 0;
      min-height: calc(100vh - 72px);
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border);
      padding: 2rem 1rem;
      position: sticky;
      top: 72px;
      height: calc(100vh - 72px);
      overflow-y: auto;
      transition: var(--transition);
    }

    .sidebar h2 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      margin: 1.5rem 0 0.75rem 1rem;
    }

    .sidebar h2:first-child {
      margin-top: 0;
    }

    .menu-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 0.75rem 1rem;
      text-decoration: none;
      color: var(--text-main);
      border-radius: 14px;
      transition: var(--transition);
      font-weight: 500;
      font-size: 0.9rem;
    }

    .menu-link:hover {
      background-color: var(--bg-body);
      color: var(--primary);
      transform: translateX(4px);
    }

    .menu-link.active {
      background-color: rgba(37, 99, 235, 0.1);
      color: var(--primary);
      font-weight: 600;
    }

    .menu-icon {
      width: 18px;
      height: 18px;
      stroke-width: 2;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 3rem 4rem;
      max-width: 1000px;
    }

    @media (max-width: 1024px) {
      .sidebar {
        width: 240px;
      }

      .main-content {
        padding: 3rem 2rem;
      }
    }

    @media (max-width: 768px) {
      .app-container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        position: static;
        display: flex;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding: 0.75rem 1rem;
        gap: 10px;
        border-right: none;
        border-bottom: 1px solid var(--border);
        scrollbar-width: thin;
      }

      .sidebar::-webkit-scrollbar {
        height: 4px;
      }

      .sidebar::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 10px;
      }

      .sidebar h2 {
        display: none;
      }

      .menu-link {
        white-space: nowrap;
        padding: 0.5rem 1rem;
      }

      .main-content {
        width: 100%;
        padding: 2rem 1.5rem;
      }
    }

    .header-section {
      margin-bottom: 3.5rem;
    }

    .header-section h1 {
      font-family: 'Outfit', sans-serif;
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      margin-bottom: 0.75rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
    }

    /* Calculator View Area */
    .calculator-view {
      display: none;
      animation: slideUp 0.5s ease-out;
    }

    .calculator-view.active {
      display: block;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Card System */
    .calc-card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 2.5rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--border);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
    }

    @media (max-width: 900px) {
      .calc-card {
        grid-template-columns: 1fr;
      }
    }

    /* Form Controls */
    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }

    .input-wrapper input,
    .input-wrapper select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: 14px;
      font-size: 0.95rem;
      transition: var(--transition);
      background: var(--bg-body);
      color: var(--text-main);
    }

    .input-wrapper input:focus,
    .input-wrapper select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
      background: var(--card-bg);
    }

    .unit {
      position: absolute;
      right: 2.5rem;
      /* Moved left to avoid spinner */
      color: var(--text-muted);
      font-weight: 600;
      font-size: 0.85rem;
      pointer-events: none;
    }

    .btn-calc {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 0.5rem;
    }

    .btn-calc:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(37, 99, 235, 0.25);
    }

    /* Results Display */
    .result-panel {
      background: var(--bg-body);
      border-radius: var(--radius-md);
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      border: 1px solid var(--border);
    }

    .result-value-main {
      font-size: 2.25rem;
      font-weight: 800;
      color: var(--primary);
      margin-bottom: 1rem;
      font-family: 'Outfit', sans-serif;
      text-align: center;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      padding-bottom: 0.75rem;
      margin-bottom: 0.75rem;
      border-bottom: 1px dashed var(--border);
      font-size: 0.9rem;
    }

    .result-row:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .result-label {
      color: var(--text-muted);
    }

    .result-val {
      font-weight: 700;
      color: var(--text-main);
    }

    .pop {
      animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes pop {
      0% {
        transform: scale(0.95);
        opacity: 0;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Input padding for units and spinners */
    .input-wrapper input {
      padding-right: 4.5rem !important;
    }
  </style>
</head>

<body data-theme="light">

  <nav class="navbar">
    <a href="index.html" class="logo">
      <svg class="menu-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2">
        <path d="M12 2v20M2 12h20" />
        <path d="m19 16-7 7-7-7" />
      </svg>
      <span>ProFinance</span>
    </a>
    <ul class="nav-links">
      <li><a href="index.html">Intro</a></li>
      <li><a href="calc.html">계산기</a></li>
      <li><a href="lotto.html">Lotto</a></li>
      <li><a href="money.html">주식-코인물타기</a></li>
      <li><a href="changemoney.html">실시간 환전기</a></li>
      <li><a href="health.html">건강 계산기</a></li>
      <li><a href="life.html">생활 계산기</a></li>
      <li><a href="finance.html">금융 계산기</a></li>
      <li><a href="tools.html">도구함</a></li>
    </ul>
    <button class="theme-toggle" onclick="toggleTheme()" id="theme-btn">
      <svg class="menu-icon" id="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="5" />
        <path
          d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M17.66 6.34l1.42-1.42" />
      </svg>
      <svg class="menu-icon" id="moon-icon" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
      </svg>
    </button>
  </nav>

  <div class="app-container">
    <aside class="sidebar">
      <h2>대출 & 부채</h2>
      <div class="menu-list">
        <a href="#loan-monthly" class="menu-link active" onclick="showCalc('loan-monthly', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
            <line x1="1" y1="10" x2="23" y2="10" />
          </svg>
          월 상환액 (원리금/원금)
        </a>
        <a href="#loan-total" class="menu-link" onclick="showCalc('loan-total', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="1" x2="12" y2="23" />
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
          </svg>
          총 대출 이자
        </a>
        <a href="#loan-installment" class="menu-link" onclick="showCalc('loan-installment', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" />
            <path d="M3 6h18" />
            <path d="M16 10a4 4 0 0 1-8 0" />
          </svg>
          할부 이자 계산
        </a>
        <a href="#loan-ltv" class="menu-link" onclick="showCalc('loan-ltv', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            <polyline points="9 22 9 12 15 12 15 22" />
          </svg>
          LTV / DTI 계산
        </a>
      </div>

      <h2>저축 & 투자</h2>
      <div class="menu-list">
        <a href="#inv-compound" class="menu-link" onclick="showCalc('inv-compound', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
            <polyline points="17 6 23 6 23 12" />
          </svg>
          복리 계산기
        </a>
        <a href="#inv-saving" class="menu-link" onclick="showCalc('inv-saving', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 5c0 1.5-2.24 3-5 3s-5-1.5-5-3 2.24-3 5-3 5 1.5 5 3Z" />
            <path d="M9 12c0 1.5 2.24 3 5 3s5-1.5 5-3" />
            <path d="M9 19c0 1.5 2.24 3 5 3s5-1.5 5-3" />
            <path d="M5 5v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5" />
          </svg>
          적금/예금 만기액
        </a>
        <a href="#inv-goal" class="menu-link" onclick="showCalc('inv-goal', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <circle cx="12" cy="12" r="6" />
            <circle cx="12" cy="12" r="2" />
          </svg>
          목표 저축액
        </a>
        <a href="#inv-dividend" class="menu-link" onclick="showCalc('inv-dividend', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="21" x2="21" y2="21" />
            <line x1="3" y1="7" x2="21" y2="7" />
            <path d="M4 7v10" />
            <path d="M8 7v10" />
            <path d="M12 7v10" />
            <path d="M16 7v10" />
            <path d="M20 7v10" />
            <path d="M10 2 8 7" />
            <path d="M14 2 16 7" />
            <path d="m18 2 3 5" />
            <path d="M6 2 3 7" />
          </svg>
          배당수익률
        </a>
        <a href="#inv-roi" class="menu-link" onclick="showCalc('inv-roi', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="20" x2="18" y2="10" />
            <line x1="12" y1="20" x2="12" y2="4" />
            <line x1="6" y1="20" x2="6" y2="14" />
          </svg>
          ROI / CAGR
        </a>
        <a href="#inv-real" class="menu-link" onclick="showCalc('inv-real', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="8" cy="8" r="6" />
            <path d="M18.09 10.37A6 6 0 1 1 10.34 18.1" />
            <path d="M7 6h1v4" />
            <path d="m16.71 13.88.7.71-2.82 2.82" />
          </svg>
          실질 수익률
        </a>
      </div>

      <h2>소득 & 급여</h2>
      <div class="menu-list">
        <a href="#inc-salary" class="menu-link" onclick="showCalc('inc-salary', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
          연봉 계산기
        </a>
        <a href="#inc-net" class="menu-link" onclick="showCalc('inc-net', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
          </svg>
          실수령액(4대보험)
        </a>
        <a href="#inc-severance" class="menu-link" onclick="showCalc('inc-severance', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="8.5" cy="7" r="4"></circle>
            <line x1="20" y1="8" x2="20" y2="14"></line>
            <line x1="23" y1="11" x2="17" y2="11"></line>
          </svg>
          퇴직금 계산기
        </a>
        <a href="#inc-tax" class="menu-link" onclick="showCalc('inc-tax', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10 9 9 9 8 9"></polyline>
          </svg>
          근로소득세 계산
        </a>
      </div>

      <h2>은퇴 & 세금</h2>
      <div class="menu-list">
        <a href="#ret-fund" class="menu-link" onclick="showCalc('ret-fund', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z" />
          </svg>
          노후 자금 설계
        </a>
        <a href="#ret-pension" class="menu-link" onclick="showCalc('ret-pension', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="8" r="7" />
            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88" />
          </svg>
          연금/IRP 필요액
        </a>
        <a href="#tax-salary" class="menu-link" onclick="showCalc('tax-salary', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z" />
            <path d="M14 8H8" />
            <path d="M16 12H8" />
            <path d="M13 16H8" />
          </svg>
          연봉 실수령액
        </a>
        <a href="#tax-benefit" class="menu-link" onclick="showCalc('tax-benefit', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="6" cy="6" r="3" />
            <circle cx="6" cy="18" r="3" />
            <line x1="20" y1="4" x2="8.12" y2="15.88" />
            <line x1="14.47" y1="14.48" x2="20" y2="20" />
            <line x1="8.12" y1="8.12" x2="12" y2="12" />
          </svg>
          절세 효과
        </a>
        <a href="#tax-global" class="menu-link" onclick="showCalc('tax-global', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
            <line x1="8" y1="21" x2="16" y2="21" />
            <line x1="12" y1="17" x2="12" y2="21" />
          </svg>
          종합소득세
        </a>
        <a href="#tax-vat" class="menu-link" onclick="showCalc('tax-vat', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21.21 15.89A10 10 0 1 1 8 2.83" />
            <path d="M22 12A10 10 0 0 0 12 2v10z" />
          </svg>
          부가가치세(VAT)
        </a>
        <a href="#tax-stock" class="menu-link" onclick="showCalc('tax-stock', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
            <polyline points="16 7 22 7 22 13" />
          </svg>
          주식 수익률/세금
        </a>
      </div>

      <h2>부동산</h2>
      <div class="menu-list">
        <a href="#prop-rent" class="menu-link" onclick="showCalc('prop-rent', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path
              d="m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3-3 3z" />
          </svg>
          전세 vs 월세 비교
        </a>
        <a href="#real-tax" class="menu-link" onclick="showCalc('real-tax', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="12" y1="18" x2="12" y2="12"></line>
            <line x1="9" y1="15" x2="15" y2="15"></line>
          </svg>
          부동산 취득세
        </a>
        <a href="#real-broker" class="menu-link" onclick="showCalc('real-broker', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"></path>
            <path d="M12 18V6"></path>
          </svg>
          중개 수수료
        </a>
        <a href="#real-conversion" class="menu-link" onclick="showCalc('real-conversion', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="17 1 21 5 17 9"></polyline>
            <path d="M3 11V9a4 4 0 0 1 4-4h14"></path>
            <polyline points="7 23 3 19 7 15"></polyline>
            <path d="M21 13v2a4 4 0 0 1-4 4H3"></path>
          </svg>
          전월세 전환
        </a>
        <a href="#real-area" class="menu-link" onclick="showCalc('real-area', event)">
          <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 3v18h18" />
            <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3" />
          </svg>
          평수 계산기
        </a>
      </div>
    </aside>

    <main class="main-content">
      <!-- 1. Loan Monthly Payment -->
      <div id="loan-monthly" class="calculator-view active">
        <div class="header-section">
          <h1>월 상환액 계산기</h1>
          <p>원리금 균등 vs 원금 균등 상환 방식별 월 납입금을 비교합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>대출 원금</label>
              <div class="input-wrapper"><input type="number" id="lm-p" value="50000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>연 이자율 (%)</label>
              <div class="input-wrapper"><input type="number" id="lm-r" value="4.5" step="0.1"><span
                  class="unit">%</span></div>
            </div>
            <div class="form-group"><label>대출 기간</label>
              <div class="input-wrapper"><input type="number" id="lm-t" value="5"><span class="unit">년</span></div>
            </div>
            <div class="form-group"><label>상환 방식</label>
              <div class="input-wrapper"><select id="lm-type">
                  <option value="annuity">원리금 균등</option>
                  <option value="equal">원금 균등</option>
                </select></div>
            </div>
            <button class="btn-calc" onclick="calcLoanMonthly()">계산하기</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 평균 상환액</div>
            <div class="result-value-main" id="lm-res-main">0</div>
            <div class="result-row"><span class="result-label">총 이자</span><span class="result-val"
                id="lm-res-i">0</span></div>
            <div class="result-row"><span class="result-label">총 상환액</span><span class="result-val"
                id="lm-res-t">0</span></div>
          </div>
        </div>
      </div>

      <!-- 2. Total Loan Interest -->
      <div id="loan-total" class="calculator-view">
        <div class="header-section">
          <h1>총 대출 이자 계산기</h1>
          <p>만기 상환 시 지불하게 될 전체 이자 비용을 확인합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>대출 원금</label>
              <div class="input-wrapper"><input type="number" id="lt-p" value="100000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>연 이자율</label>
              <div class="input-wrapper"><input type="number" id="lt-r" value="5.2"><span class="unit">%</span></div>
            </div>
            <div class="form-group"><label>기간</label>
              <div class="input-wrapper"><input type="number" id="lt-t" value="20"><span class="unit">년</span></div>
            </div>
            <button class="btn-calc" onclick="calcLoanTotal()">분석하기</button>
          </div>
          <div class="result-panel">
            <div class="result-label">총 납부 이자</div>
            <div class="result-value-main" id="lt-res-i">0</div>
            <div class="result-row"><span>상환 후 총금액</span><span id="lt-res-t">0</span></div>
          </div>
        </div>
      </div>

      <!-- 3. Installment Interest -->
      <div id="loan-installment" class="calculator-view">
        <div class="header-section">
          <h1>할부 이자 계산기</h1>
          <p>신용카드 할부 구매 시 발생하는 실질적인 이자 비용을 계산합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>할부 총액</label>
              <div class="input-wrapper"><input type="number" id="inst-p" value="1200000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>할부 개월</label>
              <div class="input-wrapper"><input type="number" id="inst-t" value="12"><span class="unit">개월</span></div>
            </div>
            <div class="form-group"><label>연 할부수수료율</label>
              <div class="input-wrapper"><input type="number" id="inst-r" value="14.5"><span class="unit">%</span></div>
            </div>
            <button class="btn-calc" onclick="calcInstallment()">비용 계산</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 할부금</div>
            <div class="result-value-main" id="inst-res-m">0</div>
            <div class="result-row"><span>총 수수료</span><span id="inst-res-i">0</span></div>
          </div>
        </div>
      </div>

      <!-- 4. LTV / DTI -->
      <div id="loan-ltv" class="calculator-view">
        <div class="header-section">
          <h1>LTV / DTI 계산기</h1>
          <p>주택 담보 여력과 소득 대비 부채 상환 능력을 자가 진단합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>주택 감정가</label>
              <div class="input-wrapper"><input type="number" id="ltv-h" value="600000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>희망 대출액</label>
              <div class="input-wrapper"><input type="number" id="ltv-l" value="360000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>연 소득</label>
              <div class="input-wrapper"><input type="number" id="ltv-inc" value="70000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>기존 연 원리금 상환액</label>
              <div class="input-wrapper"><input type="number" id="ltv-debt" value="5000000"><span class="unit">원</span>
              </div>
            </div>
            <button class="btn-calc" onclick="calcLTVDTI()">비율 분석</button>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>LTV (담보인정비율)</span><span id="res-ltv">0%</span></div>
            <div class="result-row"><span>DTI (총부채상환비율)</span><span id="res-dti">0%</span></div>
          </div>
        </div>
      </div>

      <!-- 5. Compound Interest -->
      <div id="inv-compound" class="calculator-view">
        <div class="header-section">
          <h1>복리 계산기</h1>
          <p>시간과 이자가 만나 만드는 강력한 자산 증식 효과를 확인하세요.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>투자 원금</label>
              <div class="input-wrapper"><input type="number" id="cp-p" value="10000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>연 수익률</label>
              <div class="input-wrapper"><input type="number" id="cp-r" value="8"><span class="unit">%</span></div>
            </div>
            <div class="form-group"><label>기간</label>
              <div class="input-wrapper"><input type="number" id="cp-t" value="10"><span class="unit">년</span></div>
            </div>
            <button class="btn-calc" onclick="calcCompound()">미래 가치 계산</button>
          </div>
          <div class="result-panel">
            <div class="result-label">최종 자산</div>
            <div class="result-value-main" id="cp-res-t">0</div>
            <div class="result-row"><span>순수익</span><span id="cp-res-i">0</span></div>
          </div>
        </div>
      </div>

      <!-- 6. Savings/Deposit -->
      <div id="inv-saving" class="calculator-view">
        <div class="header-section">
          <h1>적금/예금 만기액</h1>
          <p>월 불입액 또는 일시금 기준의 만기 수령액을 계산합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>월 불입액</label>
              <div class="input-wrapper"><input type="number" id="sav-m" value="500000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>적립 기간</label>
              <div class="input-wrapper"><input type="number" id="sav-t" value="24"><span class="unit">개월</span></div>
            </div>
            <div class="form-group"><label>연 이율</label>
              <div class="input-wrapper"><input type="number" id="sav-r" value="3.5"><span class="unit">%</span></div>
            </div>
            <button class="btn-calc" onclick="calcSavings()">만기액 확인</button>
          </div>
          <div class="result-panel">
            <div class="result-label">만기 수령액 (세전)</div>
            <div class="result-value-main" id="sav-res-t">0</div>
            <div class="result-row"><span>원금 합계</span><span id="sav-res-p">0</span></div>
            <div class="result-row"><span>이자 수익</span><span id="sav-res-i">0</span></div>
          </div>
        </div>
      </div>

      <!-- 7. Goal Savings -->
      <div id="inv-goal" class="calculator-view">
        <div class="header-section">
          <h1>목표 저축액 계산기</h1>
          <p>목표 금액을 모으기 위해 매월 얼마를 저축해야 하는지 역산합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>목표 금액</label>
              <div class="input-wrapper"><input type="number" id="goal-t" value="100000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>기간</label>
              <div class="input-wrapper"><input type="number" id="goal-y" value="10"><span class="unit">년</span></div>
            </div>
            <div class="form-group"><label>예상 수익률</label>
              <div class="input-wrapper"><input type="number" id="goal-r" value="5"><span class="unit">%</span></div>
            </div>
            <button class="btn-calc" onclick="calcGoal()">필요 저축액 확인</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 필요 저축액</div>
            <div class="result-value-main" id="goal-res">0</div>
          </div>
        </div>
      </div>

      <!-- 8. Dividend Yield -->
      <div id="inv-dividend" class="calculator-view">
        <div class="header-section">
          <h1>배당수익률 계산기</h1>
          <p>현재 주가 대비 연간 배당금의 비율과 예상 배당 소득을 확인합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>현재 주가</label>
              <div class="input-wrapper"><input type="number" id="div-p" value="60000"><span class="unit">원</span></div>
            </div>
            <div class="form-group"><label>연 배당금 (주당)</label>
              <div class="input-wrapper"><input type="number" id="div-d" value="2100"><span class="unit">원</span></div>
            </div>
            <div class="form-group"><label>보유 주식 수</label>
              <div class="input-wrapper"><input type="number" id="div-n" value="100"><span class="unit">주</span></div>
            </div>
            <button class="btn-calc" onclick="calcDividend()">수익률 측정</button>
          </div>
          <div class="result-panel">
            <div class="result-label">배당 수익률</div>
            <div class="result-value-main" id="div-res-r">0%</div>
            <div class="result-row"><span>연 예상 배당금</span><span id="div-res-t">0</span></div>
          </div>
        </div>
      </div>

      <!-- 9. ROI / CAGR -->
      <div id="inv-roi" class="calculator-view">
        <div class="header-section">
          <h1>ROI / CAGR 계산기</h1>
          <p>투자 성적의 총 수익률과 연평균 성장률(CAGR)을 공식 산출합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>투자 원금 (초기값)</label>
              <div class="input-wrapper"><input type="number" id="roi-p" value="10000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>최종 가치 (현재값)</label>
              <div class="input-wrapper"><input type="number" id="roi-f" value="25000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>투자 기간</label>
              <div class="input-wrapper"><input type="number" id="roi-t" value="5"><span class="unit">년</span></div>
            </div>
            <button class="btn-calc" onclick="calcROI()">성과 분석</button>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>총 수익률 (ROI)</span><span id="res-roi">0%</span></div>
            <div class="result-row"><span>연평균 성장률 (CAGR)</span><span id="res-cagr">0%</span></div>
          </div>
        </div>
      </div>

      <!-- 10. Real Return (Inflation) -->
      <div id="inv-real" class="calculator-view">
        <div class="header-section">
          <h1>실질 수익률 계산기</h1>
          <p>명목 수익률에서 인플레이션을 제외한 실제 자산가치 상승률을 확인합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>명목 수익률 (%)</label>
              <div class="input-wrapper"><input type="number" id="real-n" value="6"><span class="unit">%</span></div>
            </div>
            <div class="form-group"><label>물가 상승률 (%)</label>
              <div class="input-wrapper"><input type="number" id="real-inf" value="3.5"><span class="unit">%</span>
              </div>
            </div>
            <button class="btn-calc" onclick="calcRealReturn()">실질 수익 측정</button>
          </div>
          <div class="result-panel">
            <div class="result-label">실질 수익률</div>
            <div class="result-value-main" id="real-res">0%</div>
          </div>
        </div>
      </div>

      <!-- 11. Retirement Fund -->
      <div id="ret-fund" class="calculator-view">
        <div class="header-section">
          <h1>노후 자금 설계</h1>
          <p>은퇴 후 필요 생활비를 기반으로 총 필요 자산 규모를 추산합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>월 필요 생활비 (현재기준)</label>
              <div class="input-wrapper"><input type="number" id="rf-m" value="3000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>현재 나이</label>
              <div class="input-wrapper"><input type="number" id="rf-now" value="35"><span class="unit">세</span></div>
            </div>
            <div class="form-group"><label>은퇴 목표 나이</label>
              <div class="input-wrapper"><input type="number" id="rf-ret" value="60"><span class="unit">세</span></div>
            </div>
            <div class="form-group"><label>기대 수명</label>
              <div class="input-wrapper"><input type="number" id="rf-life" value="95"><span class="unit">세</span></div>
            </div>
            <button class="btn-calc" onclick="calcRetFund()">노후 필요 자금</button>
          </div>
          <div class="result-panel">
            <div class="result-label">총 은퇴 필요 자금</div>
            <div class="result-value-main" id="rf-res-t" style="font-size:1.8rem">0</div>
            <p style="font-size:0.8rem; color:var(--text-muted); text-align:center;">물가 상승률 3% 반영 추정치입니다.</p>
          </div>
        </div>
      </div>

      <!-- 12. Pension / IRP Need -->
      <div id="ret-pension" class="calculator-view">
        <div class="header-section">
          <h1>연금/IRP 필요액</h1>
          <p>은퇴 후 연금 소득을 위해 지금부터 적립해야 할 월 납입액을 제안합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>목표 연금 수령액 (월)</label>
              <div class="input-wrapper"><input type="number" id="pen-t" value="1500000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>준비 기간 (년)</label>
              <div class="input-wrapper"><input type="number" id="pen-y" value="25"><span class="unit">년</span></div>
            </div>
            <div class="form-group"><label>예상 운용 수익률</label>
              <div class="input-wrapper"><input type="number" id="pen-r" value="4.5"><span class="unit">%</span></div>
            </div>
            <button class="btn-calc" onclick="calcPensionNeed()">준비 계획 산출</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 권장 납입액</div>
            <div class="result-value-main" id="pen-res">0</div>
          </div>
        </div>
      </div>

      <!-- 13. Net Salary -->
      <div id="tax-salary" class="calculator-view">
        <div class="header-section">
          <h1>연봉 실수령액 계산</h1>
          <p>세금과 보험료를 제한 실제 내 통장에 입금되는 금액을 간편 추정합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>연봉 (세전)</label>
              <div class="input-wrapper"><input type="number" id="sal-a" value="50000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>부양 가족 수</label>
              <div class="input-wrapper"><input type="number" id="sal-f" value="1"><span class="unit">명</span></div>
            </div>
            <div class="form-group"><label>비과세액 (월)</label>
              <div class="input-wrapper"><input type="number" id="sal-e" value="200000"><span class="unit">원</span>
              </div>
            </div>
            <button class="btn-calc" onclick="calcSalNet()">실수령 확인</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 예상 실수령액</div>
            <div class="result-value-main" id="sal-res-m">0</div>
            <div class="result-row"><span>연 예상 실수령</span><span id="sal-res-y">0</span></div>
          </div>
        </div>
      </div>

      <!-- 14. Tax Benefit -->
      <div id="tax-benefit" class="calculator-view">
        <div class="header-section">
          <h1>절세 효과 계산기</h1>
          <p>연금저축/IRP 납입 금액에 따른 연말 정산 세액 공제 혜택을 확인합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>연간 납입액 합계 (연금+IRP)</label>
              <div class="input-wrapper"><input type="number" id="tax-p" value="9000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>총 급여액 구간</label>
              <div class="input-wrapper"><select id="tax-type">
                  <option value="0.165">5,500만원 이하 (16.5%)</option>
                  <option value="0.132">5,500만원 초과 (13.2%)</option>
                </select></div>
            </div>
            <button class="btn-calc" onclick="calcTaxBenefit()">공제 혜택 분석</button>
          </div>
          <div class="result-panel">
            <div class="result-label">연말정산 환급 예상액</div>
            <div class="result-value-main" id="tax-res">0</div>
            <p style="font-size:0.8rem; color:var(--text-muted); text-align:center;">한도 내 최대 절세액 기준입니다.</p>
          </div>
        </div>
      </div>

      <!-- 15. Property Rent Comparison -->
      <div id="prop-rent" class="calculator-view">
        <div class="header-section">
          <h1>전세 vs 월세 비교</h1>
          <p>보증금의 기회비용과 월세를 비교하여 경제적인 선택을 돕습니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>전세 보증금</label>
              <div class="input-wrapper"><input type="number" id="rent-j" value="300000000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>월세 조건 (보증금/월세)</label>
              <div style="display:flex; gap:10px;"><input type="number" id="rent-m-d" placeholder="보증금"
                  style="flex:1;"><input type="number" id="rent-m-r" placeholder="월세" style="flex:1;"></div>
            </div>
            <div class="form-group"><label>전환율/기회비용 (%)</label>
              <div class="input-wrapper"><input type="number" id="rent-rate" value="4.5"><span class="unit">%</span>
              </div>
            </div>
            <button class="btn-calc" onclick="calcPropRent()">비교 분석</button>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>전세 월 환산 비용</span><span id="rent-res-j">0</span></div>
            <div class="result-row"><span>월세 방식 총 비용</span><span id="rent-res-m">0</span></div>
            <div class="result-label" id="rent-res-best" style="margin-top:1rem; color:var(--accent)">어느 쪽이 유리할까요?</div>
          </div>
        </div>
      </div>

      <!-- 16. Real Estate Tax -->
      <div id="real-tax" class="calculator-view">
        <div class="header-section">
          <h1>부동산 취득세 계산기</h1>
          <p>주택, 오피스텔, 토지 등 부동산 취득 시 납부해야 할 세금을 계산합니다. (2026년 지방세법)</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>취득 원인</label>
              <select id="rt-cause"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="buy">매매 (유상승계)</option>
                <option value="build">원시취득 (신축 등)</option>
                <option value="inherit">상속</option>
                <option value="gift">증여</option>
              </select>
            </div>
            <div class="form-group"><label>물건 종류</label>
              <select id="rt-type"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="apt">주택 (아파트/빌라 등)</option>
                <option value="off">오피스텔</option>
                <option value="land">토지 (농지 외)</option>
                <option value="farm">농지</option>
              </select>
            </div>
            <div class="form-group" id="rt-area-grp"><label>전용 면적</label>
              <select id="rt-area"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="under85">85㎡ 이하 (국민평형)</option>
                <option value="over85">85㎡ 초과</option>
              </select>
            </div>
            <div class="form-group" id="rt-count-grp"><label>보유 주택 수 (취득 후 기준)</label>
              <select id="rt-count"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="1">1주택 (무주택자)</option>
                <option value="2">2주택 (일시적 2주택 포함)</option>
                <option value="3">3주택</option>
                <option value="4">4주택 이상 / 법인</option>
              </select>
            </div>
            <div class="form-group"><label>취득 가액</label>
              <div class="input-wrapper"><input type="number" id="rt-price" placeholder="금액 입력"><span
                  class="unit">원</span></div>
            </div>
            <button class="btn-calc" onclick="calcRealTax()">세금 계산하기</button>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>취득세</span><span id="rt-res-acq">0원</span></div>
            <div class="result-row"><span>지방교육세</span><span id="rt-res-edu">0원</span></div>
            <div class="result-row"><span>농어촌특별세</span><span id="rt-res-farm">0원</span></div>
            <div class="result-total-label">총 납부 세액</div>
            <div class="result-total-value" id="rt-res-total">0원</div>
            <p class="result-desc" style="margin-top:1rem">* 조정대상지역 여부 등에 따라 중과세율이 적용될 수 있습니다.</p>
          </div>
        </div>
      </div>

      <!-- 17. Brokerage Fee -->
      <div id="real-broker" class="calculator-view">
        <div class="header-section">
          <h1>중개 수수료</h1>
          <p>부동산 거래 시 발생하는 법정 중개 수수료를 계산합니다. (2026년 요율)</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>물건 종류</label>
              <select id="rb-type"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="house">주택</option>
                <option value="off">오피스텔 (주거용)</option>
                <option value="land">토지/상가/기타</option>
              </select>
            </div>
            <div class="form-group"><label>거래 유형</label>
              <select id="rb-deal"
                style="width:100%; padding:12px; border:2px solid var(--border); border-radius:12px;">
                <option value="buy">매매/교환</option>
                <option value="rent">전세/월세</option>
              </select>
            </div>
            <div class="form-group"><label>거래 금액 (보증금/매매가)</label>
              <div class="input-wrapper"><input type="number" id="rb-price" placeholder="금액 입력"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group" id="rb-rent-grp" style="display:none"><label>월세액 (전월세인 경우)</label>
              <div class="input-wrapper"><input type="number" id="rb-monthly" placeholder="없으면 0"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group"><label>협의 요율 (%)</label>
              <div style="display:flex; gap:10px;">
                <input type="number" id="rb-rate" placeholder="상한요율 자동 적용" step="0.01" style="flex:1;">
                <span style="align-self:center; font-size:0.9rem; color:var(--text-muted)">입력 시 우선 적용</span>
              </div>
            </div>
            <button class="btn-calc" onclick="calcBrokerFee()">수수료 계산</button>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>상한 요율</span><span id="rb-res-rate">-%</span></div>
            <div class="result-row"><span>거래 기준 가액</span><span id="rb-res-val">0원</span></div>
            <div class="result-total-label">최대 중개 보수 (VAT 별도)</div>
            <div class="result-total-value" id="rb-res-fee">0원</div>
            <p class="result-desc" style="margin-top:1rem; color:var(--accent)" id="rb-res-limit"></p>
          </div>
        </div>
      </div>

      <!-- 18. Jeonse Conversion -->
      <div id="real-conversion" class="calculator-view">
        <div class="header-section">
          <h1>전월세 전환 계산기</h1>
          <p>전세를 월세로, 또는 월세를 전세로 전환할 때 적정 금액을 계산하세요.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>계산 방향</label>
              <div style="display:flex; gap:10px; margin-bottom:10px;">
                <button class="btn-calc" id="btn-j2m" onclick="setConversionMode('j2m')"
                  style="background:var(--primary); opacity:1;">전세 → 월세</button>
                <button class="btn-calc" id="btn-m2j" onclick="setConversionMode('m2j')"
                  style="background:var(--bg-body); color:var(--text-main); border:1px solid var(--border);">월세 →
                  전세</button>
              </div>
            </div>
            <div class="form-group"><label>기존 전세금 / 보증금</label>
              <div class="input-wrapper"><input type="number" id="rc-base" placeholder="금액 입력"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group" id="rc-target-grp"><label>보증금을 얼마로 내리시겠습니까?</label>
              <div class="input-wrapper"><input type="number" id="rc-deposit" placeholder="새로운 보증금"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group" id="rc-rent-grp" style="display:none"><label>현재 월세</label>
              <div class="input-wrapper"><input type="number" id="rc-monthly-current" placeholder="현재 월세"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group"><label>전월세 전환율 (%)</label>
              <div class="input-wrapper"><input type="number" id="rc-rate" value="5.0" step="0.1"><span
                  class="unit">%</span></div>
            </div>
            <button class="btn-calc" onclick="calcConversion()">전환 금액 계산</button>
          </div>
          <div class="result-panel">
            <div class="result-label" id="rc-res-label">예상 월세</div>
            <div class="result-total-value" id="rc-res-val">0원</div>
          </div>
        </div>
      </div>

      <!-- 19. Pyeong Area -->
      <div id="real-area" class="calculator-view">
        <div class="header-section">
          <h1>평수 계산기 (면적 변환)</h1>
          <p>평 ↔ 제곱미터(㎡) 간편 변환 및 자주 쓰는 평형 정보를 제공합니다.</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group">
              <style>
                .area-presets {
                  display: grid;
                  grid-template-columns: repeat(4, 1fr);
                  gap: 8px;
                  margin-bottom: 1rem;
                }

                .preset-btn {
                  padding: 8px;
                  border: 1px solid var(--border);
                  background: var(--bg-body);
                  color: var(--text-main);
                  border-radius: 8px;
                  cursor: pointer;
                  transition: all 0.2s;
                }

                .preset-btn:hover {
                  background: var(--primary-light);
                  color: white;
                  border-color: var(--primary);
                }
              </style>
              <label>자주 찾는 평형</label>
              <div class="area-presets">
                <button class="preset-btn" onclick="setArea(20)">20평</button>
                <button class="preset-btn" onclick="setArea(25)">25평</button>
                <button class="preset-btn" onclick="setArea(30)">30평</button>
                <button class="preset-btn" onclick="setArea(34)">34평</button>
                <button class="preset-btn" onclick="setArea(40)">40평</button>
                <button class="preset-btn" onclick="setArea(45)">45평</button>
                <button class="preset-btn" onclick="setArea(50)">50평</button>
                <button class="preset-btn" onclick="setArea(60)">60평</button>
              </div>
            </div>
            <div class="form-group"><label>평수 입력</label>
              <div class="input-wrapper">
                <input type="number" id="ra-py" oninput="convertArea('py')" placeholder="평 입력"><span
                  class="unit">평</span>
              </div>
            </div>
            <div style="text-align:center; font-size:1.5rem; color:var(--primary); margin: 0.5rem 0;">⇵</div>
            <div class="form-group"><label>제곱미터 (㎡) 입력</label>
              <div class="input-wrapper">
                <input type="number" id="ra-m2" oninput="convertArea('m2')" placeholder="㎡ 입력"><span
                  class="unit">㎡</span>
              </div>
            </div>
          </div>
          <div class="result-panel">
            <div class="result-row"><span>공급면적 기준</span><span id="ra-res-supply">-</span></div>
            <div class="result-row"><span>전용면적 (약 75% 추산)</span><span id="ra-res-exclusive">-</span></div>
            <p class="result-desc" style="margin-top:1rem">1평 = 3.305785㎡ / 1㎡ = 0.3025평</p>
          </div>
        </div>
      </div>

      <!-- 16. Salary Calculator -->
      <div id="inc-salary" class="calculator-view">
        <div class="header-section">
          <h1>연봉 계산기</h1>
          <p>내 연봉의 실수령액과 공제항목을 한눈에 확인하세요. (2026년 기준)</p>
        </div>
        <div class="calc-card">
          <div class="calc-inputs">
            <div class="form-group"><label>연봉 (세전)</label>
              <div class="input-wrapper"><input type="number" id="sal-amount" value="50000000"><span
                  class="unit">원</span></div>
            </div>
            <div class="form-group"><label>비과세액 (월 식대 등)</label>
              <div class="input-wrapper"><input type="number" id="sal-nontax" value="200000"><span class="unit">원</span>
              </div>
            </div>
            <div class="form-group"><label>부양가족 수 (본인포함)</label>
              <div class="input-wrapper"><input type="number" id="sal-fam" value="1"><span class="unit">명</span></div>
            </div>
            <div class="form-group"><label>20세 이하 자녀 수</label>
              <div class="input-wrapper"><input type="number" id="sal-child" value="0"><span class="unit">명</span></div>
            </div>
            <button class="btn-calc" onclick="calcSalary()">계산하기</button>
          </div>
          <div class="result-panel">
            <div class="result-label">월 예상 실수령액</div>
            <div class="result-value-main" id="sal-res-net">0</div>
            <div class="result-row"><span>국민연금 (4.5%)</span><span id="sal-res-np">0</span></div>
            <div class="result-row"><span>건강보험 (3.545%)</span><span id="sal-res-hi">0</span></div>
            <div class="result-row"><span>요양보험 (12.95%)</span><span id="sal-res-ci">0</span></div>
            <div class="result-row"><span>고용보험 (0.9%)</span><span id="sal-res-ei">0</span></div>
            <div class="result-row"><span>근로소득세(간이세액)</span><span id="sal-res-tax">0</span></div>
            <div class="result-row"
              style="border-top:1px solid var(--border); margin-top:10px; padding-top:10px; font-weight:700;"><span>총
                공제액</span><span id="sal-res-deduct" style="color:#ef4444">0</span></div>
          </div>
        </div>
      </div>

      <!-- 17. Net Pay / 4 Major Insurances -->
      <div id="inc-net" class="calculator-view">
        <div class="header-section">
          <h3 style="margin-top:0; font-size:1rem; color:var(--text-muted);">급여 정보 입력</h3>
          <div class="form-group"><label>월 급여 (세전)</label>
            <div class="input-wrapper"><input type="number" id="net-salary" value="3000000"><span class="unit">원</span>
            </div>
          </div>
          <div class="form-group"><label>비과세액 (식대 등)</label>
            <div class="input-wrapper"><input type="number" id="net-nontax" value="200000"><span class="unit">원</span>
            </div>
          </div>
          <div class="form-group"><label>부양가족 수</label>
            <div class="input-wrapper"><input type="number" id="net-fam" value="1"><span class="unit">명</span></div>
          </div>

          <button class="btn-calc" onclick="calcNetPay()">실수령액 상세 계산</button>

          <details style="margin-top:20px; background:rgba(0,0,0,0.03); border-radius:12px; padding:15px;">
            <summary style="cursor:pointer; font-weight:700;">💡 실수령액 산출 공식 및 공제 항목</summary>
            <div style="margin-top:10px; font-size:0.9rem; line-height:1.6; color:var(--text-muted);">
              <strong>1. 실수령액 산출 공식 (The Logic)</strong><br>
              순서: 비과세 제외 → 4대보험 계산 → 세금(간이세액) 계산<br>
              $$ \text{실수령액} = \text{월 급여} - (\text{4대보험} + \text{세금}) $$<br><br>
              <strong>2. 4대보험 공제율 (2026년 추정 기준)</strong><br>
              - <strong>국민연금 (4.5%):</strong> 소득 상한액(약 640만원) 적용<br>
              - <strong>건강보험 (3.545%):</strong> 매년 변동 가능성 있음<br>
              - <strong>장기요양 (건보의 12.95%):</strong> 건강보험료 기준<br>
              - <strong>고용보험 (0.9%):</strong> 실업급여 재원, 산재보험은 0원(회사부담)<br><br>
              <strong>3. 세금 (Tax)</strong><br>
              - <strong>근로소득세:</strong> 국세청 [근로소득 간이세액표] 기준<br>
              - <strong>지방소득세:</strong> 소득세의 10%
            </div>
          </details>
        </div>
        <div class="result-panel">
          <div class="result-label">월 예상 실수령액</div>
          <div class="result-value-main" id="net-res-final">0</div>

          <div style="border-top:1px dashed var(--border); margin:15px 0;"></div>

          <h4 style="margin:10px 0; color:var(--text-main);">4대보험 상세 (본인부담금)</h4>
          <div class="result-row"><span>국민연금 (4.5%)</span><span id="net-res-np">0</span></div>
          <div class="result-row"><span>건강보험 (3.545%)</span><span id="net-res-hi">0</span></div>
          <div class="result-row"><span>장기요양 (건보의 12.95%)</span><span id="net-res-ci">0</span></div>
          <div class="result-row"><span>고용보험 (0.9%)</span><span id="net-res-ei">0</span></div>
          <div class="result-row" style="font-weight:700; color:var(--text-muted)"><span>보험 합계</span><span
              id="net-res-ins">0</span></div>

          <h4 style="margin:15px 0 10px 0; color:var(--text-main);">세금 상세 (간이세액)</h4>
          <div class="result-row"><span>소득세</span><span id="net-res-tax-main">0</span></div>
          <div class="result-row"><span>지방소득세 (10%)</span><span id="net-res-tax-local">0</span></div>
          <div class="result-row" style="font-weight:700; color:var(--text-muted)"><span>세금 합계</span><span
              id="net-res-tax">0</span></div>
        </div>
      </div>
  </div>

  <!-- 18. Severance Pay -->
  <div id="inc-severance" class="calculator-view">
    <div class="header-section">
      <h1>퇴직금 계산기</h1>
      <p>근로기준법에 따른 예상 퇴직금을 계산합니다. (2026년 통상임금 기준)</p>
    </div>
    <div class="calc-card">
      <div class="calc-inputs">
        <h3 style="margin-top:0; font-size:1rem; color:var(--text-muted);">퇴직 전 3개월 임금 정보</h3>
        <div class="form-group"><label>직전 3개월 월 기본급(평균)</label>
          <div class="input-wrapper"><input type="number" id="sev-salary" value="3000000"><span class="unit">원</span>
          </div>
        </div>
        <div class="form-group"><label>1일 통상임금 (선택사항, 비교용)</label>
          <div class="input-wrapper"><input type="number" id="sev-ordinary" placeholder="모르면 비워두세요"><span
              class="unit">원</span></div>
        </div>

        <h3 style="margin-top:20px; font-size:1rem; color:var(--text-muted);">추가 수당 정보</h3>
        <div class="form-group"><label>연간 상여금 총액</label>
          <div class="input-wrapper"><input type="number" id="sev-bonus" value="0"><span class="unit">원</span></div>
        </div>
        <div class="form-group"><label>연차 수당 (연간 지급액)</label>
          <div class="input-wrapper"><input type="number" id="sev-leave" value="0"><span class="unit">원</span></div>
        </div>

        <h3 style="margin-top:20px; font-size:1rem; color:var(--text-muted);">근무 기간 확인</h3>
        <div class="form-group"><label>근무 일수 (재직일수)</label>
          <div class="input-wrapper"><input type="number" id="sev-days" value="730"><span class="unit">일</span>
          </div>
        </div>
        <button class="btn-calc" onclick="calcSeverance()">상세 퇴직금 계산</button>

        <details style="margin-top:20px; background:rgba(0,0,0,0.03); border-radius:12px; padding:15px;">
          <summary style="cursor:pointer; font-weight:700;">💡 퇴직금 산정 공식 및 핵심 체크포인트</summary>
          <div style="margin-top:10px; font-size:0.9rem; line-height:1.6; color:var(--text-muted);">
            <strong>1. 퇴직금 산정 공식 (Formula)</strong><br>
            $$ \text{퇴직금} = \text{1일 평균임금} \times 30일 \times \frac{\text{재직일수}}{365} $$<br><br>
            <strong>2. 계산을 위한 핵심 변수와 절차</strong><br>
            <strong>Step 1. 자격 요건 확인:</strong><br>
            1년 이상 계속 근로 & 주 15시간 이상 근무.<br><br>
            <strong>Step 2. '1일 평균임금' 산출:</strong><br>
            (3개월 임금 총액 + 연간 상여금×3/12 + 연차수당×3/12) ÷ 3개월 일수<br><br>
            <strong style="color:var(--primary);">💡 중요 체크포인트 (통상임금 vs 평균임금)</strong><br>
            계산된 평균임금이 통상임금보다 적을 경우, <strong>통상임금</strong>을 기준으로 계산합니다. (근로자 유리 원칙)<br><br>
            <strong>Step 3. 세금(퇴직소득세) 공제:</strong><br>
            결과값은 '세전'이며, 실수령 시 근속연수 공제 등을 적용한 소득세가 차감됩니다.
          </div>
        </details>
      </div>
      <div class="result-panel">
        <div class="result-label">예상 퇴직금 (세전)</div>
        <div class="result-value-main" id="sev-res">0</div>

        <div style="border-top:1px dashed var(--border); margin:15px 0;"></div>

        <div class="result-row"><span>1일 평균임금</span><span id="sev-res-day">0</span></div>
        <div class="result-row"><span>적용 기준</span><span id="sev-res-type" style="color:var(--accent)">평균임금</span>
        </div>

        <p style="font-size:0.8rem; color:var(--text-muted); margin-top:10px;">
          * 실제 지급액은 퇴직소득세 공제 후 금액입니다.<br>
          * 정확한 계산을 위해 급여명세서를 참고하세요.
        </p>
      </div>
    </div>
  </div>

  <!-- 19. Earned Income Tax -->
  <div id="inc-tax" class="calculator-view">
    <div class="header-section">
      <h1>근로소득세 계산기 (연말정산용)</h1>
      <p>연간 총 급여액에 따른 과세표준과 예상 세액을 산출합니다. (2026년 세법)</p>
    </div>
    <div class="calc-card">
      <div class="calc-inputs">
        <h3 style="margin-top:0; font-size:1rem; color:var(--text-muted);">1. 사용자 입력 데이터 (Input Data)</h3>
        <div class="form-group"><label>총 급여액 (연봉, 세전)</label>
          <div class="input-wrapper"><input type="number" id="eit-salary" value="50000000"><span class="unit">원</span>
          </div>
        </div>
        <div class="form-group"><label>비과세 소득 (연간 합계)</label>
          <div class="input-wrapper"><input type="number" id="eit-nontax" value="2400000" placeholder="월 식대 등"><span
              class="unit">원</span></div>
        </div>
        <div class="form-group"><label>부양가족 수 (본인 포함)</label>
          <div class="input-wrapper"><input type="number" id="eit-fam" value="1"><span class="unit">명</span></div>
        </div>
        <div class="form-group"><label>20세 이하 자녀 수</label>
          <div class="input-wrapper"><input type="number" id="eit-child" value="0"><span class="unit">명</span></div>
        </div>

        <button class="btn-calc" onclick="calcEarnedTax()">상세 세금 계산</button>

        <details style="margin-top:20px; background:rgba(0,0,0,0.03); border-radius:12px; padding:15px;">
          <summary style="cursor:pointer; font-weight:700;">💡 계산 로직 및 요율 정보 (System Data)</summary>
          <div style="margin-top:10px; font-size:0.9rem; line-height:1.6; color:var(--text-muted);">
            <strong>2. 세법 및 요율 데이터 (System Data)</strong><br>
            - <strong>근로소득공제:</strong> 급여 구간별 차등 공제 (최대 2,000만원)<br>
            - <strong>인적공제:</strong> 1인당 150만원 기본공제<br>
            - <strong>4대 보험료 (자동공제 추산):</strong><br>
            &nbsp;&nbsp;• 국민연금: 4.5% (상한 적용)<br>
            &nbsp;&nbsp;• 건강보험: 3.545% + 요양보험(건보의 12.95%)<br>
            &nbsp;&nbsp;• 고용보험: 0.9%<br>
            - <strong>세액공제:</strong> 근로소득세액공제(한도적용), 자녀세액공제(1인 15만원)<br><br>
            <strong>3. 계산 로직 (Algorithm)</strong><br>
            1) <strong>과세대상 급여</strong> = 총 급여 - 비과세<br>
            2) <strong>근로소득금액</strong> = 과세대상 급여 - 근로소득공제<br>
            3) <strong>과세표준</strong> = 근로소득금액 - 인적공제 - 4대보험공제 - 기타공제(표준 등)<br>
            4) <strong>산출세액</strong> = 과세표준 × 기본세율 - 누진공제<br>
            5) <strong>결정세액</strong> = 산출세액 - 세액공제
          </div>
        </details>
      </div>
      <div class="result-panel">
        <div class="result-label">예상 결정세액 (지방세 포함)</div>
        <div class="result-value-main" id="eit-res-final">0</div>

        <div style="border-top:1px dashed var(--border); margin:15px 0;"></div>

        <div class="result-row"><span>① 과세대상 급여</span><span id="eit-step-1">0</span></div>
        <div class="result-row"><span>② 근로소득금액</span><span id="eit-step-2">0</span></div>
        <div class="result-row"><span>③ 과세표준</span><span id="eit-step-3">0</span></div>
        <div class="result-row"><span>④ 산출세액</span><span id="eit-step-4">0</span></div>
        <div class="result-row"><span>⑤ 세액공제</span><span id="eit-step-5" style="color:#10b981">0</span></div>

        <div style="background:var(--bg-body); padding:10px; border-radius:8px; margin-top:10px; font-size:0.9rem;">
          <div class="result-row"><span>소득세</span><span id="eit-res-tax">0</span></div>
          <div class="result-row"><span>지방소득세(10%)</span><span id="eit-res-local">0</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- 20. Global Income Tax -->
  <div id="tax-global" class="calculator-view">
    <div class="header-section">
      <h1>종합소득세 계산기</h1>
      <p>사업소득, 기타소득 등 종합소득에 대한 세금을 계산합니다. (2026년 과세표준)</p>
    </div>
    <div class="calc-card">
      <div class="calc-inputs">
        <div class="form-group"><label>연간 총 수입금액 (매출)</label>
          <div class="input-wrapper"><input type="number" id="git-revenue" value="80000000"><span class="unit">원</span>
          </div>
        </div>
        <div class="form-group"><label>필요 경비</label>
          <div class="input-wrapper"><input type="number" id="git-expense" value="30000000"><span class="unit">원</span>
          </div>
        </div>
        <div class="form-group"><label>소득공제 (기본공제 등)</label>
          <div class="input-wrapper"><input type="number" id="git-deduct" value="1500000"><span class="unit">원</span>
          </div>
        </div>
        <button class="btn-calc" onclick="calcGlobalTax()">종합소득세 계산</button>
      </div>
      <div class="result-panel">
        <div class="result-label">납부할 세액 (지방세 포함)</div>
        <div class="result-value-main" id="git-res-final">0</div>
        <div class="result-row"><span>종합소득금액</span><span id="git-res-inc">0</span></div>
        <div class="result-row"><span>과세표준</span><span id="git-res-std">0</span></div>
        <div class="result-row"><span>산출세액</span><span id="git-res-tax">0</span></div>
        <div class="result-row"><span>지방소득세(10%)</span><span id="git-res-local">0</span></div>
      </div>
    </div>
  </div>

  <!-- 21. VAT -->
  <div id="tax-vat" class="calculator-view">
    <div class="header-section">
      <h1>부가가치세 (VAT) 계산기</h1>
      <p>공급가액 또는 합계금액을 기준으로 부가세를 계산합니다.</p>
    </div>
    <div class="calc-card">
      <div class="calc-inputs">
        <div class="form-group"><label>기준 금액</label>
          <div class="input-wrapper"><input type="number" id="vat-amt" value="110000"><span class="unit">원</span>
          </div>
        </div>
        <div class="form-group"><label>계산 기준</label>
          <div class="input-wrapper"><select id="vat-type">
              <option value="total">합계금액(부가세포함)에서 분리</option>
              <option value="supply">공급가액에 부가세 더하기</option>
            </select></div>
        </div>
        <button class="btn-calc" onclick="calcVAT()">VAT 계산</button>
      </div>
      <div class="result-panel">
        <div class="result-label">부가가치세</div>
        <div class="result-value-main" id="vat-res-tax">0</div>
        <div class="result-row"><span>공급가액</span><span id="vat-res-supply">0</span></div>
        <div class="result-row"><span>합계금액</span><span id="vat-res-total">0</span></div>
      </div>
    </div>
  </div>

  <!-- 22. Stock Yield & Tax -->
  <div id="tax-stock" class="calculator-view">
    <div class="header-section">
      <h1>주식 수익률 & 세금 계산기</h1>
      <p>매매차익과 증권거래세, 양도소득세(해외/대주주)를 포함한 실질 수익률을 계산합니다. (2026년 세제안)</p>
    </div>
    <div class="calc-card">
      <div class="calc-inputs">
        <div class="form-group"><label>매수 단가</label>
          <div class="input-wrapper"><input type="number" id="stk-buy" value="10000"><span class="unit">원/$</span>
          </div>
        </div>
        <div class="form-group"><label>매도 단가</label>
          <div class="input-wrapper"><input type="number" id="stk-sell" value="15000"><span class="unit">원/$</span>
          </div>
        </div>
        <div class="form-group"><label>수량</label>
          <div class="input-wrapper"><input type="number" id="stk-qty" value="100"><span class="unit">주</span></div>
        </div>
        <div class="form-group"><label>증권사 수수료율 (편도)</label>
          <div class="input-wrapper"><input type="number" id="stk-fee-rate" value="0.015"><span class="unit">%</span>
          </div>
        </div>
        <div class="form-group"><label>세금 유형</label>
          <div class="input-wrapper"><select id="stk-tax-type">
              <option value="kor">국내주식 (거래세 0.15% - 2025/26 인하분)</option>
              <option value="usa">해외주식/대주주 (양도세 22%)</option>
            </select></div>
        </div>
        <button class="btn-calc" onclick="calcStockTax()">수익률 계산</button>
      </div>
      <div class="result-panel">
        <div class="result-label">실현 수익금 (세후)</div>
        <div class="result-value-main" id="stk-res-net">0</div>
        <div class="result-row"><span>수익률</span><span id="stk-res-yield"
            style="color:var(--primary); font-weight:700;">0%</span></div>
        <div class="result-row"><span>총 수수료</span><span id="stk-res-fee">0</span></div>
        <div class="result-row"><span>총 세금(거래세/양도세)</span><span id="stk-res-tax">0</span></div>
      </div>
    </div>
  </div>

  </main>
  </div>

  <script>
    const fmt = new Intl.NumberFormat('ko-KR');
    function formatNum(n) { return fmt.format(Math.round(n)); }
    function v(id) { return parseFloat(document.getElementById(id).value) || 0; }
    function set(id, text) {
      const el = document.getElementById(id);
      el.innerText = text;
      el.classList.add('pop');
      setTimeout(() => el.classList.remove('pop'), 400);
    }

    function toggleTheme() {
      const next = document.body.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.body.setAttribute('data-theme', next);
      document.getElementById('sun-icon').style.display = next === 'light' ? 'block' : 'none';
      document.getElementById('moon-icon').style.display = next === 'dark' ? 'block' : 'none';
    }

    function showCalc(id, event) {
      if (event) event.preventDefault();
      document.querySelectorAll('.menu-link').forEach(l => l.classList.toggle('active', l.getAttribute('href') === '#' + id));
      document.querySelectorAll('.calculator-view').forEach(v => v.classList.toggle('active', v.id === id));
      window.scrollTo(0, 0);
    }

    // 1. Loan Monthly
    function calcLoanMonthly() {
      const p = v('lm-p'), r = v('lm-r') / 100 / 12, t = v('lm-t') * 12, type = document.getElementById('lm-type').value;
      let monthly = 0, total = 0;
      if (type === 'annuity') {
        monthly = p * r * Math.pow(1 + r, t) / (Math.pow(1 + r, t) - 1);
        total = monthly * t;
      } else {
        const first = (p / t) + (p * r), last = (p / t) + (p / t * r);
        monthly = (first + last) / 2;
        total = monthly * t;
      }
      set('lm-res-main', fmt.format(Math.round(monthly)) + '원');
      set('lm-res-i', fmt.format(Math.round(total - p)) + '원');
      set('lm-res-t', fmt.format(Math.round(total)) + '원');
    }

    // 2. Loan Total
    function calcLoanTotal() {
      const p = v('lt-p'), r = v('lt-r') / 100, t = v('lt-t');
      const totalInt = p * r * t; // Simplified Simple Interest or user can choose compound
      set('lt-res-i', fmt.format(Math.round(totalInt)) + '원');
      set('lt-res-t', fmt.format(Math.round(p + totalInt)) + '원');
    }

    // 3. Installment
    function calcInstallment() {
      const p = v('inst-p'), t = v('inst-t'), r = v('inst-r') / 100 / 12;
      const fee = p * (v('inst-r') / 100) * (t / 12); // Standard Card Installment Fee Logic
      set('inst-res-m', fmt.format(Math.round((p + fee) / t)) + '원');
      set('inst-res-i', fmt.format(Math.round(fee)) + '원');
    }

    // 4. LTV DTI
    function calcLTVDTI() {
      const h = v('ltv-h'), l = v('ltv-l'), inc = v('ltv-inc'), debt = v('ltv-debt');
      set('res-ltv', ((l / h) * 100).toFixed(1) + '%');
      set('res-dti', (((debt + (l * 0.05)) / inc) * 100).toFixed(1) + '%'); // 0.05 is estimated annual principal
    }

    // 5. Compound
    function calcCompound() {
      const p = v('cp-p'), r = v('cp-r') / 100, t = v('cp-t');
      const res = p * Math.pow(1 + r, t);
      set('cp-res-t', fmt.format(Math.round(res)) + '원');
      set('cp-res-i', fmt.format(Math.round(res - p)) + '원');
    }

    // 6. Savings
    function calcSavings() {
      const m = v('sav-m'), t = v('sav-t'), r = v('sav-r') / 100 / 12;
      const res = m * (Math.pow(1 + r, t) - 1) / r * (1 + r);
      set('sav-res-t', fmt.format(Math.round(res)) + '원');
      set('sav-res-p', fmt.format(m * t) + '원');
      set('sav-res-i', fmt.format(Math.round(res - m * t)) + '원');
    }

    // 7. Goal
    function calcGoal() {
      const t = v('goal-t'), y = v('goal-y') * 12, r = v('goal-r') / 100 / 12;
      const res = t * r / ((Math.pow(1 + r, y) - 1) * (1 + r));
      set('goal-res', fmt.format(Math.round(res)) + '원');
    }

    // 8. Dividend
    function calcDividend() {
      const p = v('div-p'), d = v('div-d'), n = v('div-n');
      set('div-res-r', ((d / p) * 100).toFixed(2) + '%');
      set('div-res-t', fmt.format(d * n) + '원');
    }

    // 9. ROI CAGR
    function calcROI() {
      const p = v('roi-p'), f = v('roi-f'), t = v('roi-t');
      set('res-roi', (((f / p) - 1) * 100).toFixed(2) + '%');
      set('res-cagr', ((Math.pow(f / p, 1 / t) - 1) * 100).toFixed(2) + '%');
    }

    // 10. Real Return
    function calcRealReturn() {
      const n = v('real-n') / 100, i = v('real-inf') / 100;
      const real = ((1 + n) / (1 + i) - 1) * 100;
      set('real-res', real.toFixed(2) + '%');
    }

    // 11. Retirement Fund
    function calcRetFund() {
      const m = v('rf-m'), now = v('rf-now'), ret = v('rf-ret'), life = v('rf-life');
      const gap = ret - now, years = life - ret;
      const inflM = m * Math.pow(1.03, gap); // Monthly spending at retirement
      const total = inflM * 12 * years;
      set('rf-res-t', fmt.format(Math.round(total)) + '원');
    }

    // 12. Pension Need
    function calcPensionNeed() {
      const t = v('pen-t'), y = v('pen-y') * 12, r = v('pen-r') / 100 / 12;
      // Simplified pension model
      const targetFund = t * 12 * 25; // Target 25 years of withdrawal
      const monthly = targetFund * r / (Math.pow(1 + r, y) - 1);
      set('pen-res', fmt.format(Math.round(monthly)) + '원');
    }

    // 13. Sal Net
    function calcSalNet() {
      const a = v('sal-a'), e = v('sal-e') * 12;
      const taxable = (a - e) / 12;
      const net = taxable * 0.85 + (e / 12); // Rough 15% deductions estimate
      set('sal-res-m', fmt.format(Math.round(net)) + '원');
      set('sal-res-y', fmt.format(Math.round(net * 12)) + '원');
    }

    // 14. Tax Benefit
    function calcTaxBenefit() {
      const p = Math.min(v('tax-p'), 9000000), r = parseFloat(document.getElementById('tax-type').value);
      set('tax-res', fmt.format(Math.round(p * r)) + '원');
    }

    // 15. Prop Rent
    function calcPropRent() {
      const j = v('rent-j'), md = v('rent-m-d'), mr = v('rent-m-r'), r = v('rent-rate') / 100 / 12;
      const costJ = j * r, costM = (md * r) + mr;
      set('rent-res-j', fmt.format(Math.round(costJ)) + '원');
      set('rent-res-m', fmt.format(Math.round(costM)) + '원');
      set('rent-res-best', costJ < costM ? '전세가 더 경제적입니다' : '월세가 더 경제적입니다');
    }

    // 16. Real Tax
    function calcRealTax() {
      const p = v('rt-price');
      const cause = document.getElementById('rt-cause').value;
      const type = document.getElementById('rt-type').value;
      const count = parseInt(document.getElementById('rt-count').value);
      const isOver85 = document.getElementById('rt-area').value === 'over85';

      let rateAcq = 0.04; // Default standard (e.g. commercial land)
      if (cause === 'buy') {
        if (type === 'apt') {
          // House acquisition tax rates (Simplified 2024-2025)
          // 1 house: 1-3% based on price
          let baseRate = 0.01;
          if (p > 600000000 && p <= 900000000) {
            baseRate = (p * 2 / 300000000 - 3) / 100; // Formula
          } else if (p > 900000000) {
            baseRate = 0.03;
          }

          // Heavy tax for multi-home (Simplified logic: ignore adjustment area complexity for now, assume standard heavy tax if >2)
          // 1: 1-3%, 2: 1-3% (non-adj), 3: 8%, 4+: 12%
          if (count === 3) baseRate = 0.08;
          else if (count >= 4) baseRate = 0.12;

          rateAcq = baseRate;
        } else if (type === 'off') {
          rateAcq = 0.04;
        } else if (type === 'farm') {
          rateAcq = 0.03;
        } else {
          rateAcq = 0.04; // Land/Commercial
        }
      } else if (cause === 'build') {
        rateAcq = 0.028;
      } else if (cause === 'inherit') {
        rateAcq = (type === 'farm') ? 0.023 : 0.028;
      } else if (cause === 'gift') {
        rateAcq = 0.035; // Standard gift (can be 12% if in adj area and >300m, but keep simple)
      }

      // Edu & Farm Tax
      // Edu tax: usually 0.1 of rate (or 0.4% if multi-home heavy)
      // Farm tax: 0.2% if > 85m2
      let rateEdu = 0.002; // Standard approx
      let rateFarm = 0;

      if (type === 'apt' && cause === 'buy') {
        if (count >= 3) rateEdu = 0.004; // Heavy tax case
        else if (p <= 600000000) rateEdu = 0.001;
        else if (p <= 900000000) rateEdu = 0.002;
        else rateEdu = 0.003;

        if (isOver85) rateFarm = 0.002;
      } else if (type === 'off') {
        rateEdu = 0.004;
        rateFarm = 0.002; // Officetel usually has farm tax? Standard is 4.6% total
      } else {
        rateEdu = 0.002;
        if (type !== 'apt' && isOver85) rateFarm = 0.002;
      }

      // Calculation
      const taxAcq = Math.floor(p * rateAcq);
      const taxEdu = Math.floor(p * rateEdu);
      const taxFarm = Math.floor(p * rateFarm);

      set('rt-res-acq', fmt.format(taxAcq) + '원');
      set('rt-res-edu', fmt.format(taxEdu) + '원');
      set('rt-res-farm', fmt.format(taxFarm) + '원');
      set('rt-res-total', fmt.format(taxAcq + taxEdu + taxFarm) + '원');
    }

    // 17. Broker Fee
    function calcBrokerFee() {
      const type = document.getElementById('rb-type').value;
      const deal = document.getElementById('rb-deal').value;
      let price = v('rb-price');
      const monthly = v('rb-monthly');
      const manualRate = v('rb-rate');

      // Rental conversion
      if (deal === 'rent') {
        let rentalVal = price + (monthly * 100);
        if (rentalVal < 50000000) {
          rentalVal = price + (monthly * 70);
        }
        price = rentalVal;
      }

      set('rb-res-val', fmt.format(price) + '원');

      let maxRate = 0;
      let limit = 0;

      if (manualRate > 0) {
        maxRate = manualRate;
      } else {
        // Standard 2024 rates
        if (type === 'house') {
          if (deal === 'buy') {
            if (price < 50000000) { maxRate = 0.6; limit = 250000; }
            else if (price < 200000000) { maxRate = 0.5; limit = 800000; }
            else if (price < 900000000) { maxRate = 0.4; }
            else if (price < 1200000000) { maxRate = 0.5; }
            else if (price < 1500000000) { maxRate = 0.6; }
            else { maxRate = 0.7; }
          } else { // Rent
            if (price < 50000000) { maxRate = 0.5; limit = 200000; }
            else if (price < 100000000) { maxRate = 0.4; limit = 300000; }
            else if (price < 600000000) { maxRate = 0.3; }
            else if (price < 1000000000) { maxRate = 0.4; }
            else { maxRate = 0.5; }
          }
        } else if (type === 'off') { // Officetel (Residential)
          maxRate = (deal === 'buy') ? 0.5 : 0.4;
        } else { // Land/Comm
          maxRate = 0.9;
        }
      }

      let fee = Math.floor(price * (maxRate / 100));
      if (limit > 0 && fee > limit) fee = limit;

      set('rb-res-rate', maxRate.toFixed(2) + '%');
      set('rb-res-fee', fmt.format(fee) + '원');
      if (limit > 0 && fee === limit) document.getElementById('rb-res-limit').innerText = "* 한도액 적용됨";
      else document.getElementById('rb-res-limit').innerText = "";
    }

    // 18. Conversion
    let convMode = 'j2m';
    function setConversionMode(mode) {
      convMode = mode;
      const btnJ = document.getElementById('btn-j2m');
      const btnM = document.getElementById('btn-m2j');
      const rentGrp = document.getElementById('rc-rent-grp');
      const targetGrp = document.getElementById('rc-target-grp');

      if (mode === 'j2m') {
        // Jeonse -> Monthly
        btnJ.style.background = 'var(--primary)'; btnJ.style.color = 'white'; btnJ.style.borderColor = 'transparent';
        btnM.style.background = 'var(--bg-body)'; btnM.style.color = 'var(--text-main)'; btnM.style.borderColor = 'var(--border)';
        rentGrp.style.display = 'none';
        targetGrp.style.display = 'block';
        document.getElementById('rc-res-label').innerText = "예상 월세";
      } else {
        // Monthly -> Jeonse
        btnM.style.background = 'var(--primary)'; btnM.style.color = 'white'; btnM.style.borderColor = 'transparent';
        btnJ.style.background = 'var(--bg-body)'; btnJ.style.color = 'var(--text-main)'; btnJ.style.borderColor = 'var(--border)';
        rentGrp.style.display = 'block';
        targetGrp.style.display = 'none'; // target deposit input not needed? Or used as target?
        // Actually M2J usually means "I have 1000/50, what is this in Jeonse?"
        // Formula: Deposit + (Rent * 12 / Rate) = Jeonse
        document.getElementById('rc-res-label').innerText = "전세 환산액";
      }
    }

    function calcConversion() {
      const base = v('rc-base');
      const rate = v('rc-rate') / 100;

      if (convMode === 'j2m') {
        const deposit = v('rc-deposit');
        // (BaseJeonse - NewDeposit) * Rate / 12
        const diff = base - deposit;
        const monthly = (diff * rate) / 12;
        set('rc-res-val', fmt.format(Math.floor(monthly)) + '원');
      } else {
        const monthlyCurrent = v('rc-monthly-current');
        // BaseDeposit + (Monthly * 12 / Rate)
        const jeonse = base + (monthlyCurrent * 12 / rate);
        set('rc-res-val', fmt.format(Math.floor(jeonse)) + '원');
      }
    }

    // 19. Area
    function setArea(py) {
      document.getElementById('ra-py').value = py;
      convertArea('py');
    }

    function convertArea(from) {
      if (from === 'py') {
        const py = v('ra-py');
        const m2 = py * 3.305785;
        document.getElementById('ra-m2').value = m2.toFixed(2);
        updateAreaInfo(m2);
      } else {
        const m2 = v('ra-m2');
        const py = m2 / 3.305785;
        document.getElementById('ra-py').value = py.toFixed(2);
        updateAreaInfo(m2);
      }
    }

    function updateAreaInfo(m2) {
      const supply = m2; // Assume input is supply area usually
      const exclusive = m2 * 0.75; // Approx 75% efficiency
      set('ra-res-supply', fmt.format(supply.toFixed(1)) + '㎡');
      set('ra-res-exclusive', fmt.format(exclusive.toFixed(1)) + '㎡');
    }
    // --- Income & Salary Logic ---
    function calcSalary() {
      const salary = parseFloat(document.getElementById('sal-amount').value) || 0;
      const nontax = parseFloat(document.getElementById('sal-nontax').value) || 0;
      // Simple approximation for Monthly Net
      // 1. Monthly Taxable
      let monthlyTotal = salary / 12;
      let monthlyTaxable = monthlyTotal - nontax;
      if (monthlyTaxable < 0) monthlyTaxable = 0;

      // 2. Insurances
      // National Pension (4.5%, 2026 estimated cap around 6.4m monthly income)
      // Cap base monthly: 6,400,000 (Estimate for 2026)
      let npBase = monthlyTaxable;
      if (npBase > 6400000) npBase = 6400000;
      let np = npBase * 0.045;

      // Health (3.545% maintained usually)
      let hi = monthlyTaxable * 0.03545;

      // Care (12.95% of Health)
      let ci = hi * 0.1295;

      // Employment (0.9%)
      let ei = monthlyTaxable * 0.009;

      // 3. Tax (Simplified using simple bracket on monthly taxable * 12)
      // This is a rough estimation. Accurate requires 'Gani start table'
      // Let's use annual tax bracket on (annual taxable) and divide by 12 for rough check
      let annualTaxable = (monthlyTaxable - np - hi - ci - ei) * 12;
      // Standard Deduction for Earned Income (approx)
      // <= 5mil: 70%
      // <= 15mil: 40%
      // <= 45mil: 15%
      // <= 100mil: 5%
      // > 100 mil: 2%
      // Actually simplified: take tax from calcEarnedTaxLogic and divide by 12
      let annualTax = getEarnedIncomeTax(salary); // Reuse logic
      let monthlyTax = annualTax / 12;

      // Final
      let totalDeduct = np + hi + ci + ei + monthlyTax;
      let net = monthlyTotal - totalDeduct;

      document.getElementById('sal-res-net').innerText = formatNum(net) + '원';
      document.getElementById('sal-res-np').innerText = '-' + formatNum(np) + '원';
      document.getElementById('sal-res-hi').innerText = '-' + formatNum(hi) + '원';
      document.getElementById('sal-res-ci').innerText = '-' + formatNum(ci) + '원';
      document.getElementById('sal-res-ei').innerText = '-' + formatNum(ei) + '원';
      document.getElementById('sal-res-tax').innerText = '-' + formatNum(monthlyTax) + '원';
      document.getElementById('sal-res-deduct').innerText = '-' + formatNum(totalDeduct) + '원';
    }

    function calcNetPay() {
      const monthly = parseFloat(document.getElementById('net-salary').value) || 0;
      const nontax = parseFloat(document.getElementById('net-nontax').value) || 0;
      const fam = parseFloat(document.getElementById('net-fam').value) || 1;

      let monthlyTaxable = monthly - nontax;
      if (monthlyTaxable < 0) monthlyTaxable = 0;

      // Similar to calcSalary but input is monthly
      let npBase = monthlyTaxable;
      if (npBase > 6400000) npBase = 6400000;

      // 4 Major Insurances
      let np = npBase * 0.045; // National Pension
      let hi = monthlyTaxable * 0.03545; // Health
      let ci = hi * 0.1295; // Care
      let ei = monthlyTaxable * 0.009; // Employment

      // Floors
      np = Math.floor(np / 10) * 10;
      hi = Math.floor(hi / 10) * 10;
      ci = Math.floor(ci / 10) * 10;
      ei = Math.floor(ei / 10) * 10;

      // Simple tax estimation (Use Annual logic / 12 for better accuracy or 3%)
      let annualEst = monthly * 12; // Simple projection
      let annualTax = getEarnedIncomeTax(annualEst); // Reuse the annual tax logic
      // Adjustment: 간이세액표 is slightly different from Annual/12 usually (80-120% choice), but for estimate:
      let monthlyTax = Math.floor((annualTax / 12) / 10) * 10;

      let localTax = Math.floor((monthlyTax * 0.1) / 10) * 10;

      let totalIns = np + hi + ci + ei;
      let totalTax = monthlyTax + localTax;
      let final = monthly - totalIns - totalTax;

      document.getElementById('net-res-final').innerText = formatNum(final) + '원';

      document.getElementById('net-res-np').innerText = '-' + formatNum(np) + '원';
      document.getElementById('net-res-hi').innerText = '-' + formatNum(hi) + '원';
      document.getElementById('net-res-ci').innerText = '-' + formatNum(ci) + '원';
      document.getElementById('net-res-ei').innerText = '-' + formatNum(ei) + '원';
      document.getElementById('net-res-ins').innerText = '-' + formatNum(totalIns) + '원';

      document.getElementById('net-res-tax-main').innerText = '-' + formatNum(monthlyTax) + '원';
      document.getElementById('net-res-tax-local').innerText = '-' + formatNum(localTax) + '원';
      document.getElementById('net-res-tax').innerText = '-' + formatNum(totalTax) + '원';
    }

    function calcSeverance() {
      const salary = parseFloat(document.getElementById('sev-salary').value) || 0;
      const bonus = parseFloat(document.getElementById('sev-bonus').value) || 0;
      const leave = parseFloat(document.getElementById('sev-leave').value) || 0;
      const days = parseFloat(document.getElementById('sev-days').value) || 0;
      const ordinaryManual = parseFloat(document.getElementById('sev-ordinary').value) || 0;

      // Average Daily Wage
      // 1. 3 months total salary
      let threeMonthSalary = salary * 3;
      // 2. Bonus portion (3/12 of annual)
      let bonusPortion = bonus * (3 / 12);
      // 3. Leave allowance portion (3/12)
      let leavePortion = leave * (3 / 12);

      let totalBase = threeMonthSalary + bonusPortion + leavePortion;
      // Days in 3 months (approx 90-92, let's use 91 for standard calc)
      let avgDaily = totalBase / 91;

      let calcType = "평균임금";

      // Check Point: Ordinary Wage
      if (ordinaryManual > 0 && ordinaryManual > avgDaily) {
        avgDaily = ordinaryManual;
        calcType = "통상임금(근로자 유리)";
      }

      // Severance: AvgDaily * 30 * (ServiceDays / 365)
      let severance = avgDaily * 30 * (days / 365);

      document.getElementById('sev-res').innerText = formatNum(severance) + '원';
      document.getElementById('sev-res-day').innerText = formatNum(avgDaily) + '원';
      document.getElementById('sev-res-type').innerText = calcType;
    }

    function calcEarnedTax() {
      const salary = parseFloat(document.getElementById('eit-salary').value) || 0;
      const nontax = parseFloat(document.getElementById('eit-nontax').value) || 0;
      const fam = parseFloat(document.getElementById('eit-fam').value) || 1;
      const child = parseFloat(document.getElementById('eit-child').value) || 0;

      // 1. Taxable Income
      let taxableIncome = salary - nontax;
      if (taxableIncome < 0) taxableIncome = 0;

      // 2. Earned Income Deduction (2025-2026 limit 20m)
      let deduction = 0;
      if (taxableIncome <= 5000000) deduction = taxableIncome * 0.7;
      else if (taxableIncome <= 15000000) deduction = 3500000 + (taxableIncome - 5000000) * 0.4;
      else if (taxableIncome <= 45000000) deduction = 7500000 + (taxableIncome - 15000000) * 0.15;
      else if (taxableIncome <= 100000000) deduction = 12000000 + (taxableIncome - 45000000) * 0.05;
      else deduction = 14750000 + (taxableIncome - 100000000) * 0.02;

      if (deduction > 20000000) deduction = 20000000;

      let earnedIncome = taxableIncome - deduction; // 근로소득금액

      // 3. Subjective Deduction (Person)
      let personDeduction = fam * 1500000;

      // 4. Insurance Deduction (Estimate)
      // Recalculate monthly base for insurance
      let monthlyTaxable = taxableIncome / 12;

      // NP (4.5%, Cap 6.4m)
      let npBase = monthlyTaxable;
      if (npBase > 6400000) npBase = 6400000;
      let annualNP = npBase * 0.045 * 12;

      // HI (3.545% + 12.95% Care)
      let annualHI = (monthlyTaxable * 0.03545 * 1.1295) * 12;

      // EI (0.9%)
      let annualEI = annualNP * (0.009 / 0.045); // Approximate or separate calc
      annualEI = monthlyTaxable * 0.009 * 12;

      let insuranceDeduction = annualNP + annualHI + annualEI;

      // 5. Tax Base
      // We assume standard deduction if special deductions are not input?
      // For simplicity, let's use: EarnedIncome - Person - Insurance
      // Note: "Standard Tax Deduction" (130k) or Special Deduction applies. 
      // This calculator does 'Detailed' approach with estimates.
      let taxBase = earnedIncome - personDeduction - insuranceDeduction;
      if (taxBase < 0) taxBase = 0;

      // 6. Calculated Tax
      let calcTax = calcTaxFromBase(taxBase);

      // 7. Tax Credits
      // A. Earned Income Tax Credit
      let taxCredit = 0;
      if (calcTax <= 1300000) {
        taxCredit = calcTax * 0.55;
      } else {
        taxCredit = 715000 + (calcTax - 1300000) * 0.30;
      }

      // Limit check (Simplified standard limits)
      let creditLimit = 740000;
      if (taxableIncome > 70000000) creditLimit = 6600000; // Actually 660,000 -> typo fix: 660000
      if (taxableIncome > 70000000) creditLimit = 660000;
      if (taxableIncome > 120000000) creditLimit = 500000;

      if (taxCredit > creditLimit) taxCredit = creditLimit;

      // B. Child Tax Credit
      let childCredit = child * 150000;
      if (child >= 3) childCredit = 300000 + (child - 2) * 300000; // 3rd child+ gives more usually

      let totalCredit = taxCredit + childCredit;

      // 8. Final Tax
      let finalTax = calcTax - totalCredit;
      if (finalTax < 0) finalTax = 0;

      let localTax = finalTax * 0.1;
      let totalPayable = finalTax + localTax;

      // Display
      document.getElementById('eit-res-final').innerText = formatNum(totalPayable) + '원';

      document.getElementById('eit-step-1').innerText = formatNum(taxableIncome) + '원';
      document.getElementById('eit-step-2').innerText = formatNum(earnedIncome) + '원';
      document.getElementById('eit-step-3').innerText = formatNum(taxBase) + '원';
      document.getElementById('eit-step-4').innerText = formatNum(calcTax) + '원';
      document.getElementById('eit-step-5').innerText = '-' + formatNum(totalCredit) + '원';

      document.getElementById('eit-res-tax').innerText = formatNum(finalTax) + '원';
      document.getElementById('eit-res-local').innerText = formatNum(localTax) + '원';
    }

    // Reuse logic helper
    function getEarnedIncomeTax(annualSalary) {
      // Simplified version of calcEarnedTax for internal use
      let deduction = 0;
      if (annualSalary <= 5000000) deduction = annualSalary * 0.7;
      else if (annualSalary <= 15000000) deduction = 3500000 + (annualSalary - 5000000) * 0.4;
      else if (annualSalary <= 45000000) deduction = 7500000 + (annualSalary - 15000000) * 0.15;
      else if (annualSalary <= 100000000) deduction = 12000000 + (annualSalary - 45000000) * 0.05;
      else deduction = 14750000 + (annualSalary - 100000000) * 0.02;
      let base = annualSalary - deduction - 1500000; // minus personal
      if (base < 0) base = 0;
      return calcTaxFromBase(base);
    }

    function calcTaxFromBase(base) {
      if (base <= 14000000) return base * 0.06;
      if (base <= 50000000) return base * 0.15 - 1260000;
      if (base <= 88000000) return base * 0.24 - 5760000;
      if (base <= 150000000) return base * 0.35 - 15440000;
      if (base <= 300000000) return base * 0.38 - 19940000;
      if (base <= 500000000) return base * 0.40 - 25940000;
      if (base <= 1000000000) return base * 0.42 - 35940000;
      return base * 0.45 - 65940000;
    }

    // --- Retirement & Tax Logic ---
    function calcGlobalTax() {
      const rev = parseFloat(document.getElementById('git-revenue').value) || 0;
      const exp = parseFloat(document.getElementById('git-expense').value) || 0;
      const ded = parseFloat(document.getElementById('git-deduct').value) || 0;

      let income = rev - exp;
      let stdBase = income - ded;
      if (stdBase < 0) stdBase = 0;

      let tax = calcTaxFromBase(stdBase);
      let local = tax * 0.1;

      document.getElementById('git-res-final').innerText = formatNum(tax + local) + '원';
      document.getElementById('git-res-inc').innerText = formatNum(income) + '원';
      document.getElementById('git-res-std').innerText = formatNum(stdBase) + '원';
      document.getElementById('git-res-tax').innerText = formatNum(tax) + '원';
      document.getElementById('git-res-local').innerText = formatNum(local) + '원';
    }

    function calcVAT() {
      const amt = parseFloat(document.getElementById('vat-amt').value) || 0;
      const type = document.getElementById('vat-type').value;

      let supply = 0;
      let vat = 0;
      let total = 0;

      if (type === 'total') {
        // Amount is Total (Supply + VAT)
        // Supply = Total / 1.1
        supply = Math.round(amt / 1.1);
        vat = amt - supply;
        total = amt;
      } else {
        // Amount is Supply
        supply = amt;
        vat = Math.round(amt * 0.1);
        total = supply + vat;
      }

      document.getElementById('vat-res-tax').innerText = formatNum(vat) + '원';
      document.getElementById('vat-res-supply').innerText = formatNum(supply) + '원';
      document.getElementById('vat-res-total').innerText = formatNum(total) + '원';
    }

    function calcStockTax() {
      const buy = parseFloat(document.getElementById('stk-buy').value) || 0;
      const sell = parseFloat(document.getElementById('stk-sell').value) || 0;
      const qty = parseFloat(document.getElementById('stk-qty').value) || 0;
      const feeRate = parseFloat(document.getElementById('stk-fee-rate').value) || 0;
      const type = document.getElementById('stk-tax-type').value;

      let totalBuy = buy * qty;
      let totalSell = sell * qty;

      // Fee (Buy + Sell)
      let f1 = totalBuy * (feeRate / 100);
      let f2 = totalSell * (feeRate / 100);
      let totalFee = f1 + f2;

      let grossProfit = totalSell - totalBuy - totalFee;
      let tax = 0;

      if (type === 'kor') {
        // Securities Transaction Tax (Target 0.15% for 2025+)
        tax = totalSell * 0.0015;
      } else {
        // Overseas: 22% on profit > 2.5m deduction
        // Assume no deduction used elsewhere for simplicity, or show raw tax
        // Let's apply basic deduction 2.5m logic
        let taxableProfit = grossProfit - 2500000;
        if (taxableProfit < 0) taxableProfit = 0;
        tax = taxableProfit * 0.22;
      }

      let netProfit = grossProfit - tax;
      let yield = 0;
      if (totalBuy > 0) yield = (netProfit / totalBuy) * 100;

      document.getElementById('stk-res-net').innerText = formatNum(netProfit) + (type === 'usa' ? '$ (환율미고려)' : '원');
      document.getElementById('stk-res-yield').innerText = yield.toFixed(2) + '%';
      document.getElementById('stk-res-fee').innerText = formatNum(totalFee) + '원';
      document.getElementById('stk-res-tax').innerText = formatNum(tax) + '원';
    }
  </script>
</body>

</html>